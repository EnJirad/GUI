-- Xlib.lua

-- นิยามตัวแปรเริ่มต้น
local Xlib = {}
Xlib.__index = Xlib

-- ฟังก์ชันใหม่เพื่อสร้างอินสแตนซ์ใหม่
function Xlib:new()
    local newObj = {
        tabs = {},
        window = nil,
        minimized = false,
        closeButton = nil,
        minimizeButton = nil
    }
    setmetatable(newObj, self)
    return newObj
end

-- ฟังก์ชันเปลี่ยนชื่อหน้าต่าง
function Xlib:setWindowName(newName)
    if self.window then
        self.window.Title.Text = newName
    end
end

-- ฟังก์ชันสร้างหน้าต่าง UI
function Xlib:createUIWindow()
    local ScreenGui = Instance.new("ScreenGui")
    ScreenGui.Name = "Xlib"
    ScreenGui.Parent = game.CoreGui
    
    local MainContainer = Instance.new("Frame")
    MainContainer.Size = UDim2.new(0.2, 0, 1, 0)
    MainContainer.Position = UDim2.new(0, 0, 0, 0)
    MainContainer.BackgroundColor3 = Color3.new(0.3, 0.3, 0.3)
    MainContainer.BorderSizePixel = 0
    MainContainer.Name = "MainContainer"
    MainContainer.Parent = ScreenGui
    
    local TabContainer = Instance.new("Frame")
    TabContainer.Size = UDim2.new(0.8, 0, 1, 0)
    TabContainer.Position = UDim2.new(0.2, 0, 0, 0)
    TabContainer.BackgroundColor3 = Color3.new(0.2, 0.2, 0.2)
    TabContainer.BorderSizePixel = 0
    TabContainer.Name = "TabContainer"
    TabContainer.Parent = ScreenGui
    
    local Title = Instance.new("TextLabel")
    Title.Size = UDim2.new(1, 0, 0, 30)
    Title.BackgroundColor3 = Color3.new(0.2, 0.2, 0.2)
    Title.TextColor3 = Color3.new(1, 1, 1)
    Title.Text = "Window Title"
    Title.Font = Enum.Font.SourceSans
    Title.TextSize = 20
    Title.Name = "Title"
    Title.Parent = MainContainer
    
    local CloseButton = Instance.new("TextButton")
    CloseButton.Size = UDim2.new(0, 30, 0, 30)
    CloseButton.Position = UDim2.new(1, -30, 0, 0)
    CloseButton.BackgroundColor3 = Color3.new(1, 0, 0)
    CloseButton.TextColor3 = Color3.new(1, 1, 1)
    CloseButton.Text = "X"
    CloseButton.Font = Enum.Font.SourceSans
    CloseButton.TextSize = 20
    CloseButton.Name = "CloseButton"
    CloseButton.Parent = Title
    self.closeButton = CloseButton
    CloseButton.MouseButton1Click:Connect(function()
        ScreenGui:Destroy()
    end)
    
    local MinimizeButton = Instance.new("TextButton")
    MinimizeButton.Size = UDim2.new(0, 30, 0, 30)
    MinimizeButton.Position = UDim2.new(1, -60, 0, 0)
    MinimizeButton.BackgroundColor3 = Color3.new(0, 0, 1)
    MinimizeButton.TextColor3 = Color3.new(1, 1, 1)
    MinimizeButton.Text = "-"
    MinimizeButton.Font = Enum.Font.SourceSans
    MinimizeButton.TextSize = 20
    MinimizeButton.Name = "MinimizeButton"
    MinimizeButton.Parent = Title
    self.minimizeButton = MinimizeButton
    MinimizeButton.MouseButton1Click:Connect(function()
        self:minimize()
    end)
    
    return ScreenGui
end

-- ฟังก์ชันปิดหน้าต่าง UI
function Xlib:minimize()
    self.minimized = not self.minimized
    if self.minimized then
        self.window.Visible = false
    else
        self.window.Visible = true
    end
end

-- ฟังก์ชันสร้างแท็บใหม่
function Xlib:createTab(tabName)
    local newTab = {
        name = tabName,
        items = {},
        frame = nil
    }
    
    newTab.frame = Instance.new("Frame")
    newTab.frame.Size = UDim2.new(1, 0, 1, 0)
    newTab.frame.BackgroundTransparency = 1
    newTab.frame.Name = tabName
    newTab.frame.Parent = self.tabs
    
    return newTab
end

-- ฟังก์ชันเพิ่มรายการในแท็บ
function Xlib:addItem(tab, itemName, itemType)
    local newItem = {
        name = itemName,
        type = itemType,
        frame = nil
    }
    
    newItem.frame = Instance.new("Frame")
    newItem.frame.Size = UDim2.new(1, 0, 0, 30)
    newItem.frame.BackgroundColor3 = Color3.new(0.3, 0.3, 0.3)
    newItem.frame.Name = itemName
    newItem.frame.Parent = tab.frame
    
    local label = Instance.new("TextLabel")
    label.Size = UDim2.new(1, 0, 1, 0)
    label.BackgroundTransparency = 1
    label.TextColor3 = Color3.new(1, 1, 1)
    label.Text = itemName
    label.Font = Enum.Font.SourceSans
    label.TextSize = 20
    label.Parent = newItem.frame
    
    return newItem
end

-- ฟังก์ชันสร้าง drop down
function Xlib:createDropDown(tab, dropDownName, options)
    local newDropDown = {
        name = dropDownName,
        options = options,
        frame = nil
    }
    
    newDropDown.frame = Instance.new("Frame")
    newDropDown.frame.Size = UDim2.new(1, 0, 0, 60)
    newDropDown.frame.BackgroundColor3 = Color3.new(0.3, 0.3, 0.3)
    newDropDown.frame.Name = dropDownName
    newDropDown.frame.Parent = tab.frame
    
    local dropdownLabel = Instance.new("TextLabel")
    dropdownLabel.Size = UDim2.new(1, 0, 0, 30)
    dropdownLabel.Position = UDim2.new(0, 0, 0, 0)
    dropdownLabel.BackgroundColor3 = Color3.new(0.4, 0.4, 0.4)
    dropdownLabel.TextColor3 = Color3.new(1, 1, 1)
    dropdownLabel.Text = dropDownName
    dropdownLabel.Font = Enum.Font.SourceSans
    dropdownLabel.TextSize = 20
    dropdownLabel.Parent = newDropDown.frame
    
    local dropdownFrame = Instance.new("Frame")
    dropdownFrame.Size = UDim2.new(1, 0, 0, 30 * #options)
    dropdownFrame.Position = UDim2.new(0, 0, 1, 0)
    dropdownFrame.BackgroundTransparency = 1
    dropdownFrame.Visible = false
    dropdownFrame.Name = "Options"
    dropdownFrame.Parent = newDropDown.frame
    
    for i, option in ipairs(options) do
        local optionButton = Instance.new("TextButton")
        optionButton.Size = UDim2.new(1, 0, 0, 30)
        optionButton.Position = UDim2.new(0, 0, 0, (i - 1) * 30)
        optionButton.BackgroundColor3 = Color3.new(0.4, 0.4, 0.4)
        optionButton.TextColor3 = Color3.new(1, 1, 1)
        optionButton.Text = option
        optionButton.Font = Enum.Font.SourceSans
        optionButton.TextSize = 20
        optionButton.Parent = dropdownFrame
    end
    
    dropdownLabel.MouseButton1Click:Connect(function()
        dropdownFrame.Visible = not dropdownFrame.Visible
    end)
    
    return newDropDown
end

return Xlib
