-- Xlib.lua (https://github.com/EnJirad/GUI/blob/main/Xlib.lua)

local Xlib = {}

function Xlib:CreateUI()
    local ScreenGui = Instance.new("ScreenGui")
    ScreenGui.Name = "XlibScreenGui"
    ScreenGui.Parent = game.Players.LocalPlayer:WaitForChild("PlayerGui")
    
    local MainFrame = Instance.new("Frame")
    MainFrame.Size = UDim2.new(0, 600, 0, 400)
    MainFrame.Position = UDim2.new(0.5, -300, 0.5, -200)
    MainFrame.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
    MainFrame.BorderSizePixel = 0
    MainFrame.Active = true
    MainFrame.Draggable = true
    MainFrame.Parent = ScreenGui
    
    local TitleBar = Instance.new("Frame")
    TitleBar.Size = UDim2.new(1, 0, 0, 30)
    TitleBar.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
    TitleBar.BorderSizePixel = 0
    TitleBar.Parent = MainFrame
    
    local TitleLabel = Instance.new("TextLabel")
    TitleLabel.Size = UDim2.new(1, -60, 1, 0)
    TitleLabel.Position = UDim2.new(0, 5, 0, 0)
    TitleLabel.Text = "Xlib UI"
    TitleLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
    TitleLabel.BackgroundTransparency = 1
    TitleLabel.Font = Enum.Font.SourceSans
    TitleLabel.TextSize = 18
    TitleLabel.Parent = TitleBar
    
    local MinimizeButton = Instance.new("TextButton")
    MinimizeButton.Size = UDim2.new(0, 20, 0, 20)
    MinimizeButton.Position = UDim2.new(1, -55, 0, 5)
    MinimizeButton.Text = "-"
    MinimizeButton.BackgroundColor3 = Color3.fromRGB(70, 70, 70)
    MinimizeButton.TextColor3 = Color3.fromRGB(255, 255, 255)
    MinimizeButton.Font = Enum.Font.SourceSans
    MinimizeButton.TextSize = 16
    MinimizeButton.Parent = TitleBar
    
    local CloseButton = Instance.new("TextButton")
    CloseButton.Size = UDim2.new(0, 20, 0, 20)
    CloseButton.Position = UDim2.new(1, -25, 0, 5)
    CloseButton.Text = "X"
    CloseButton.BackgroundColor3 = Color3.fromRGB(100, 0, 0)
    CloseButton.TextColor3 = Color3.fromRGB(255, 255, 255)
    CloseButton.Font = Enum.Font.SourceSans
    CloseButton.TextSize = 16
    CloseButton.Parent = TitleBar
    
    local TabFrame = Instance.new("Frame")
    TabFrame.Size = UDim2.new(0, 120, 1, -30)
    TabFrame.Position = UDim2.new(0, 0, 0, 30)
    TabFrame.BackgroundColor3 = Color3.fromRGB(45, 45, 45)
    TabFrame.BorderSizePixel = 0
    TabFrame.Parent = MainFrame
    
    local ToggleFrame = Instance.new("ScrollingFrame")
    ToggleFrame.Size = UDim2.new(1, -125, 1, -30)
    ToggleFrame.Position = UDim2.new(0, 125, 0, 30)
    ToggleFrame.BackgroundColor3 = Color3.fromRGB(45, 45, 45)
    ToggleFrame.BorderSizePixel = 0
    ToggleFrame.CanvasSize = UDim2.new(0, 0, 2, 0)
    ToggleFrame.ScrollBarThickness = 8
    ToggleFrame.Parent = MainFrame
    
    local function minimize()
        MainFrame.Visible = false
        local MinimizedIcon = Instance.new("TextButton", ScreenGui)
        MinimizedIcon.Size = UDim2.new(0, 35, 0, 35)
        MinimizedIcon.Position = UDim2.new(0, 10, 0, 10)
        MinimizedIcon.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
        MinimizedIcon.Text = "O"
        MinimizedIcon.TextColor3 = Color3.fromRGB(255, 255, 255)
        MinimizedIcon.Font = Enum.Font.SourceSans
        MinimizedIcon.TextSize = 24
        MinimizedIcon.Draggable = true
        MinimizedIcon.MouseButton1Click:Connect(function()
            MainFrame.Visible = true
            MinimizedIcon:Destroy()
        end)
    end

    local function close()
        ScreenGui:Destroy()
    end

    MinimizeButton.MouseButton1Click:Connect(minimize)
    CloseButton.MouseButton1Click:Connect(close)
    
    return MainFrame, TabFrame, ToggleFrame
end

function Xlib:CreateTab(tabFrame, tabName, callback)
    local tabButton = Instance.new("TextButton")
    tabButton.Size = UDim2.new(1, 0, 0, 30)
    tabButton.Position = UDim2.new(0, 0, 0, (#tabFrame:GetChildren() - 1) * 35)
    tabButton.Text = tabName
    tabButton.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
    tabButton.TextColor3 = Color3.fromRGB(255, 255, 255)
    tabButton.Font = Enum.Font.SourceSans
    tabButton.TextSize = 16
    tabButton.Parent = tabFrame
    
    tabButton.MouseButton1Click:Connect(callback)
end

function Xlib:CreateToggle(toggleFrame, toggleName, default, callback)
    local toggleButton = Instance.new("TextButton")
    toggleButton.Size = UDim2.new(1, 0, 0, 30)
    toggleButton.Position = UDim2.new(0, 0, 0, (#toggleFrame:GetChildren() - 1) * 35)
    toggleButton.Text = toggleName
    toggleButton.BackgroundColor3 = Color3.fromRGB(80, 80, 80)
    toggleButton.TextColor3 = Color3.fromRGB(255, 255, 255)
    toggleButton.Font = Enum.Font.SourceSans
    toggleButton.TextSize = 16
    toggleButton.Parent = toggleFrame
    
    local toggle = {
        Name = toggleName,
        Default = default,
        Callback = callback,
    }
    
    toggleButton.MouseButton1Click:Connect(function()
        toggle.Default = not toggle.Default
        callback(toggle.Default)
    end)
    
    return toggle
end

return Xlib
