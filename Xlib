-- Xlib.lua

-- นิยามตัวแปรเริ่มต้น
local Xlib = {}
Xlib.__index = Xlib

-- ฟังก์ชันใหม่เพื่อสร้างอินสแตนซ์ใหม่
function Xlib:new()
    local newObj = {
        bars = {},
        window = nil,
        minimized = false,
        closeButton = nil,
        minimizeButton = nil
    }
    setmetatable(newObj, self)
    return newObj
end

-- ฟังก์ชันเปลี่ยนชื่อหน้าต่าง
function Xlib:setWindowName(newName)
    if self.window then
        self.window.Title.Text = newName
    end
end

-- ฟังก์ชันสร้างหน้าต่าง UI
function Xlib:createUIWindow()
    local ScreenGui = Instance.new("ScreenGui")
    ScreenGui.Name = "Xlib"
    ScreenGui.Parent = game.CoreGui
    
    local MainFrame = Instance.new("Frame")
    MainFrame.Size = UDim2.new(0.2, 0, 1, 0)
    MainFrame.Position = UDim2.new(0, 0, 0, 0)
    MainFrame.BackgroundColor3 = Color3.new(0.3, 0.3, 0.3)
    MainFrame.BorderSizePixel = 0
    MainFrame.Name = "MainFrame"
    MainFrame.Parent = ScreenGui
    
    local TabContainer = Instance.new("Frame")
    TabContainer.Size = UDim2.new(0.8, 0, 1, 0)
    TabContainer.Position = UDim2.new(0.2, 0, 0, 0)
    TabContainer.BackgroundColor3 = Color3.new(0.2, 0.2, 0.2)
    TabContainer.BorderSizePixel = 0
    TabContainer.Name = "TabContainer"
    TabContainer.Parent = ScreenGui
    
    local Title = Instance.new("TextLabel")
    Title.Size = UDim2.new(1, 0, 0, 30)
    Title.BackgroundColor3 = Color3.new(0.2, 0.2, 0.2)
    Title.TextColor3 = Color3.new(1, 1, 1)
    Title.Text = "Window Title"
    Title.Font = Enum.Font.SourceSans
    Title.TextSize = 20
    Title.Name = "Title"
    Title.Parent = MainFrame
    
    local CloseButton = Instance.new("TextButton")
    CloseButton.Size = UDim2.new(0, 30, 0, 30)
    CloseButton.Position = UDim2.new(1, -30, 0, 0)
    CloseButton.BackgroundColor3 = Color3.new(1, 0, 0)
    CloseButton.TextColor3 = Color3.new(1, 1, 1)
    CloseButton.Text = "X"
    CloseButton.Font = Enum.Font.SourceSans
    CloseButton.TextSize = 20
    CloseButton.Name = "CloseButton"
    CloseButton.Parent = Title
    self.closeButton = CloseButton
    CloseButton.MouseButton1Click:Connect(function()
        ScreenGui:Destroy()
    end)
    
    local MinimizeButton = Instance.new("TextButton")
    MinimizeButton.Size = UDim2.new(0, 30, 0, 30)
    MinimizeButton.Position = UDim2.new(1, -60, 0, 0)
    MinimizeButton.BackgroundColor3 = Color3.new(0, 0, 1)
    MinimizeButton.TextColor3 = Color3.new(1, 1, 1)
    MinimizeButton.Text = "-"
    MinimizeButton.Font = Enum.Font.SourceSans
    MinimizeButton.TextSize = 20
    MinimizeButton.Name = "MinimizeButton"
    MinimizeButton.Parent = Title
    self.minimizeButton = MinimizeButton
    MinimizeButton.MouseButton1Click:Connect(function()
        self:minimize()
    end)
    
    return ScreenGui
end

-- ฟังก์ชันปิดหน้าต่าง UI
function Xlib:minimize()
    self.minimized = not self.minimized
    if self.minimized then
        self.window.Visible = false
    else
        self.window.Visible = true
    end
end

-- ฟังก์ชันสร้างแถบใหม่
function Xlib:createTab(tabName)
    local newTab = {
        name = tabName,
        items = {}
    }
    return newTab
end

-- ฟังก์ชันเพิ่มรายการลงในแท็บ
function Xlib:addItem(tab, itemName, itemType)
    local newItem = {
        name = itemName,
        type = itemType
    }
    table.insert(tab.items, newItem)
    return newItem
end

-- ฟังก์ชันสร้าง drop down
function Xlib:createDropDown(tab, dropDownName, options)
    local newDropDown = {
        name = dropDownName,
        options = options
    }
    table.insert(tab.items, newDropDown)
    return newDropDown
end

return Xlib
